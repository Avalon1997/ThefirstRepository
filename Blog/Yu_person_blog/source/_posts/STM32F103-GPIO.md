---
title: STM32F103 GPIO
date: 2022-04-01 17:19:11
index_img: /img/STM32F103_GPIO_1.png
banner_img: /img/STM32F103C8T6_Board.webp
tags:
- 原创
- 单片机
categories: 
- STM32
excerpt: STM32F103VET6 通用 GPIO 介绍
---

> 本片介绍 STM32F103VET6 通用 GPIO 的基本原理，功能及复用。

# 功能描述

每个 GPI/O 端口有两个32位配置寄存器(GPIOx_CRL，GPIOx_CRH)，两个32位数据寄存器(GPIOx_IDR和GPIOx_ODR)，一个32位置位/复位寄存器(GPIOx_BSRR)，一个16位复位寄存器(GPIOx_BRR)和一个32位锁定寄存器(GPIOx_LCKR)。  
在技术手册中列出了每个 I/O 端口的特定硬件特征， GPIO 端口的每个位可以由软件分别配置成多种模式：  
+ 输入浮空  
+ 输入上拉  
+ 输入下拉  
+ 模拟输入  
+ 开漏输出  
+ 推挽式输出  
+ 推挽式复用功能
+ 开漏复用功能
每个 I/O 端口位可以自由编程，然而 I/O 端口寄存器必须按 32 位字被访问（不允许半字或字节访问）。 GPIOx_BSRR 和 GPIOx_BRR 寄存器允许对任何 GPIO 寄存器的读/更改的独立访问，在读和更改访问之间产生 IRQ(Interrupt Request) 不会有任何风险。

![GPIO 端口的基本结构](./STM32F103-GPIO/STM32F103_GPIO_Instruction.png)

![GPIO 端口基本结构（兼容5V）](./STM32F103-GPIO/STM32F103_GPIO_Instruction(compatible%205V).png)

---
对于 GPIO 口的模式可精分为：

1. 输入模式（模拟/浮空/上拉/下拉）：在输入模式时，施密特触发器打开，输出被禁止，可通过输入数据寄存器 GPIOx_IDR读取 I/O 状态。其中输入模式，可设置为上拉、下拉、浮空和模拟输入四种。上拉和下拉输入很好理解，默认的电平由上拉或者下拉决定。浮空输入的电平是不确定的，完全由外部的输入决定，一般接按键的时候用的是浮空输入。模拟输入则用于 ADC 采集。
2. 输出模式（推挽/开漏）：在输出模式中，推挽模式时双 MOS 管以轮流方式工作，输出数据寄存器GPIOx_ODR可控制 I/O 输出高低电平。开漏模式时，只有 N-MOS 管工作，输出数据寄存器可控制I/O输出高阻态或低电平。输出速度可配置，有 2MHz\10MHz\50MHz 的选项。此处的输出速度即 I/O 支持的高低电平状态最高切换频率，支持的频率越高，功耗越大，如果功耗要求不严格，把速度设置成最大即可。  
在输出模式时施密特触发器是打开的，即输入可用，通过输入数据寄存器 GPIOx_IDR可读取 I/O 的实际状态。
3. 复用功能（推挽/开漏）：复用功能模式中，输出使能，输出速度可配置，可工作在开漏及推挽模式，但是输出信号源于其它外设，输出数据寄存器 GPIOx_ODR 无效；输入可用，通过输入数据寄存器可获取 I/O 实际状态，但一般直接用外设的寄存器来获取该数据信号。

在[GPIO 端口的基本结构]：
1. 保护二极管工作方式：当引脚电压VDD



























